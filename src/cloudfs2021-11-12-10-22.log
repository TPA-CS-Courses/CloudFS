student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/mydedup.o: Compiling object
In file included from cloudfs/mydedup.cc:26:0:
cloudfs/cloudfs.h:44:1: error: ‘nt’ does not name a type
 nt cloudfs_getattr(const char *pathname, struct stat *statbuf);
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:311:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:388:37: error: ‘cloudfs_getattr’ was not declared in this scope
     cloudfs_getattr(path_s, &statbuf);
                                     ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:491:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:578:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:625:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:243:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:297:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
make: *** [build/obj/mydedup.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/mydedup.o: Compiling object
In file included from cloudfs/mydedup.cc:26:0:
cloudfs/cloudfs.h:44:1: error: ‘nt’ does not name a type
 nt cloudfs_getattr(const char *pathname, struct stat *statbuf);
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:311:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:388:37: error: ‘cloudfs_getattr’ was not declared in this scope
     cloudfs_getattr(path_s, &statbuf);
                                     ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:491:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:578:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:625:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:243:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:297:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
make: *** [build/obj/mydedup.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:311:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:325:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:436:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:491:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:578:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:576:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:625:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:243:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:297:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
Untaring /home/student/chk2/src/tests/checkpoint_2/test_2_2/big_test.tar.gz into /home/student/mnt/fuse/ ...
tar: big_test/largefile: Wrote only 2560 of 10240 bytes
tar: big_test/largefile: Cannot utime: Transport endpoint is not connected
tar: big_test/a: Cannot mkdir: Transport endpoint is not connected
tar: big_test/a/big1: Cannot open: Transport endpoint is not connected
tar: big_test/a/big3: Cannot open: Transport endpoint is not connected
tar: big_test/a/big2: Cannot open: Transport endpoint is not connected
tar: big_test/b: Cannot mkdir: Transport endpoint is not connected
tar: big_test/b/big4: Cannot open: Transport endpoint is not connected
tar: big_test: Cannot utime: Transport endpoint is not connected
tar: Exiting with failure status due to previous errors
Unable to untar the /home/student/chk2/src/tests/checkpoint_2/test_2_2/big_test.tar.gz into /home/student/mnt/fuse/. Stopping the test.
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:176:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:338:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:625:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:713:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:722:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:723:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:802:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:969:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1084:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1122:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1209:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1234:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1166:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1313:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int debug_fclose_traker(FILE*)’:
cloudfs/mydedup.cc:125:35: error: ‘filename’ was not declared in this scope
 PF("[%s]: closed %s\n", __func__, filename);
                                   ^
cloudfs/mydedup.cc:38:41: note: in definition of macro ‘PF’
 #define PF(...) fprintf(de_cfg->logfile,__VA_ARGS__)
                                         ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:324:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:504:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:591:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:638:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:256:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:310:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
make: *** [build/obj/mydedup.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ make
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:178:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:340:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:627:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:715:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:724:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:725:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:804:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:971:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1086:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1124:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1211:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1236:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1168:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1315:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int debug_fclose_traker(int, FILE*)’:
cloudfs/mydedup.cc:38:52: warning: format ‘%p’ expects argument of type ‘void*’, but argument 4 has type ‘int’ [-Wformat=]
 #define PF(...) fprintf(de_cfg->logfile,__VA_ARGS__)
                                                    ^
cloudfs/mydedup.cc:131:5: note: in expansion of macro ‘PF’
     PF("[%s]: closed %p\n", __func__, line, stream);
     ^
cloudfs/mydedup.cc:38:52: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(de_cfg->logfile,__VA_ARGS__)
                                                    ^
cloudfs/mydedup.cc:131:5: note: in expansion of macro ‘PF’
     PF("[%s]: closed %p\n", __func__, line, stream);
     ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:330:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:344:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:455:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:510:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:597:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:644:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:262:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:316:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
/home/student/chk2/src/scripts/cloudfs_controller.sh: line 48: 30354 Segmentation fault      (core dumped) $CLOUDFS_BIN "$@"
Unable to start cloudfs
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:330:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:344:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:455:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:510:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:597:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:595:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:644:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:262:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:316:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Trying to do a lazy unmount for cloudfs
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
/home/student/chk2/src/scripts/cloudfs_controller.sh: line 48: 30552 Segmentation fault      (core dumped) $CLOUDFS_BIN "$@"
Unable to start cloudfs
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:178:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:340:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:627:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:715:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:724:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:725:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:804:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put(char*, char*, long int)’:
cloudfs/cloudfs.cc:61:58: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFOPEN(x,y) debug_fopen_traker(__func__, (x), (y))
                                                          ^
cloudfs/cloudfs.cc:886:14: note: in expansion of macro ‘DFOPEN’
     infile = DFOPEN(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:7: error:   initializing argument 1 of ‘FILE* debug_fopen_traker(char*, const char*, const char*)’ [-fpermissive]
 FILE *debug_fopen_traker(char * func, const char *filename, const char *mode);
       ^
cloudfs/cloudfs.cc:62:53: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFCLOSE(x) debug_fclose_traker(__func__, (x))
                                                     ^
cloudfs/cloudfs.cc:891:5: note: in expansion of macro ‘DFCLOSE’
     DFCLOSE(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int debug_fclose_traker(char*, FILE*)’ [-fpermissive]
 int debug_fclose_traker(char * func, FILE *stream);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put_old(char*, char*, stat*)’:
cloudfs/cloudfs.cc:61:58: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFOPEN(x,y) debug_fopen_traker(__func__, (x), (y))
                                                          ^
cloudfs/cloudfs.cc:927:14: note: in expansion of macro ‘DFOPEN’
     infile = DFOPEN(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:7: error:   initializing argument 1 of ‘FILE* debug_fopen_traker(char*, const char*, const char*)’ [-fpermissive]
 FILE *debug_fopen_traker(char * func, const char *filename, const char *mode);
       ^
cloudfs/cloudfs.cc:62:53: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFCLOSE(x) debug_fclose_traker(__func__, (x))
                                                     ^
cloudfs/cloudfs.cc:932:5: note: in expansion of macro ‘DFCLOSE’
     DFCLOSE(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int debug_fclose_traker(char*, FILE*)’ [-fpermissive]
 int debug_fclose_traker(char * func, FILE *stream);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:61:58: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFOPEN(x,y) debug_fopen_traker(__func__, (x), (y))
                                                          ^
cloudfs/cloudfs.cc:968:15: note: in expansion of macro ‘DFOPEN’
     outfile = DFOPEN(path_s, "wb");
               ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:7: error:   initializing argument 1 of ‘FILE* debug_fopen_traker(char*, const char*, const char*)’ [-fpermissive]
 FILE *debug_fopen_traker(char * func, const char *filename, const char *mode);
       ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:971:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc:62:53: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFCLOSE(x) debug_fclose_traker(__func__, (x))
                                                     ^
cloudfs/cloudfs.cc:973:5: note: in expansion of macro ‘DFCLOSE’
     DFCLOSE(outfile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int debug_fclose_traker(char*, FILE*)’ [-fpermissive]
 int debug_fclose_traker(char * func, FILE *stream);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1086:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:61:58: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFOPEN(x,y) debug_fopen_traker(__func__, (x), (y))
                                                          ^
cloudfs/cloudfs.cc:1094:28: note: in expansion of macro ‘DFOPEN’
                 FILE *fd = DFOPEN(path_s, "w");
                            ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:7: error:   initializing argument 1 of ‘FILE* debug_fopen_traker(char*, const char*, const char*)’ [-fpermissive]
 FILE *debug_fopen_traker(char * func, const char *filename, const char *mode);
       ^
cloudfs/cloudfs.cc:62:53: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFCLOSE(x) debug_fclose_traker(__func__, (x))
                                                     ^
cloudfs/cloudfs.cc:1095:17: note: in expansion of macro ‘DFCLOSE’
                 DFCLOSE(fd);
                 ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int debug_fclose_traker(char*, FILE*)’ [-fpermissive]
 int debug_fclose_traker(char * func, FILE *stream);
     ^
cloudfs/cloudfs.cc:1124:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1211:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1236:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:61:58: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define DFOPEN(x,y) debug_fopen_traker(__func__, (x), (y))
                                                          ^
cloudfs/cloudfs.cc:1681:15: note: in expansion of macro ‘DFOPEN’
     logfile = DFOPEN(log_path, "a");
               ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:7: error:   initializing argument 1 of ‘FILE* debug_fopen_traker(char*, const char*, const char*)’ [-fpermissive]
 FILE *debug_fopen_traker(char * func, const char *filename, const char *mode);
       ^
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1168:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1315:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
make: *** [build/obj/cloudfs.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:178:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:218:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:242:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:293:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:329:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:340:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:381:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:397:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:539:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:557:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:602:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:622:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:627:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:667:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:715:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:724:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:725:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:804:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:971:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1047:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1086:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1124:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1173:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1211:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1236:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1368:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1418:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1444:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1588:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1685:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1168:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1315:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:329:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:343:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:454:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:509:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:596:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:643:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:261:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:315:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Trying to do a lazy unmount for cloudfs
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
/home/student/chk2/src/scripts/cloudfs_controller.sh: line 48: 30768 Segmentation fault      (core dumped) $CLOUDFS_BIN "$@"
Unable to start cloudfs
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:329:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:343:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:454:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:509:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:596:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:594:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:643:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:261:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:315:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Trying to do a lazy unmount for cloudfs
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
/home/student/chk2/src/scripts/cloudfs_controller.sh: line 48: 30970 Segmentation fault      (core dumped) $CLOUDFS_BIN "$@"
Unable to start cloudfs
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:176:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:338:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:625:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:713:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:722:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:723:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:802:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:969:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1084:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1122:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1209:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1234:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1166:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1313:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:324:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:338:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:449:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:504:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:591:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:589:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:638:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:256:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:310:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Trying to do a lazy unmount for cloudfs
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
/home/student/chk2/src/scripts/cloudfs_controller.sh: line 48: 31176 Segmentation fault      (core dumped) $CLOUDFS_BIN "$@"
Unable to start cloudfs
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:174:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:214:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:214:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:238:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:238:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:289:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:289:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:325:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:325:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:336:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:377:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:377:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:412:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:412:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:535:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:535:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:553:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:553:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:598:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:598:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:618:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:618:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:623:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:663:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:663:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:711:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:720:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:721:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:800:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:967:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1043:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1043:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1082:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1120:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1169:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1169:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1207:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1232:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1364:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1364:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1391:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1391:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1440:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1440:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1584:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1584:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1681:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1681:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1164:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1311:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
build/obj/mydedup.o: Compiling object
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:316:13: warning: unused variable ‘i’ [-Wunused-variable]
         int i = sscanf(num_line, "%ldn", &segs[num_seg]->seg_size);
             ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile_append(char*, char*, seg_info**, int)’:
cloudfs/mydedup.cc:330:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_uploadfile(char*)’:
cloudfs/mydedup.cc:441:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret = 0;
         ^
cloudfs/mydedup.cc: In function ‘int mydedup_download_and_combine(char*, seg_info**, int, int)’:
cloudfs/mydedup.cc:496:10: warning: unused variable ‘offset’ [-Wunused-variable]
     long offset = 0;
          ^
cloudfs/mydedup.cc: In function ‘int seg_upload_one(char*, long int, char*, long int)’:
cloudfs/mydedup.cc:583:1: warning: no return statement in function returning non-void [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: At global scope:
cloudfs/mydedup.cc:581:5: warning: unused parameter ‘pathname’ [-Wunused-parameter]
 int seg_upload_one(char *pathname, long offset, char *key, long len) {
     ^
cloudfs/mydedup.cc:581:5: warning: unused parameter ‘offset’ [-Wunused-parameter]
cloudfs/mydedup.cc:581:5: warning: unused parameter ‘key’ [-Wunused-parameter]
cloudfs/mydedup.cc:581:5: warning: unused parameter ‘len’ [-Wunused-parameter]
cloudfs/mydedup.cc: In function ‘int set_ref(const char*, int)’:
cloudfs/mydedup.cc:630:11: warning: unused variable ‘fp’ [-Wunused-variable]
     FILE *fp;
           ^
cloudfs/mydedup.cc: In function ‘int mydedup_segmentation(char*, int*, seg_info**)’:
cloudfs/mydedup.cc:248:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/mydedup.cc: In function ‘int mydedup_readsegs_from_proxy(char*, seg_info**)’:
cloudfs/mydedup.cc:302:48: warning: ignoring return value of ‘char* fgets(char*, int, FILE*)’, declared with attribute warn_unused_result [-Wunused-result]
         fgets(line, MAX_PATH_LEN, fp_fileproxy);
                                                ^
build/bin/cloudfs: Building executable
./tests/checkpoint_2/test_2_2/test_2_2.sh
cloudfs will be passed following options :  --ssd-path /home/student/mnt/ssd/ --fuse-path /home/student/mnt/fuse/ --threshold 16 --avg-seg-size 4

Executing test_2_2

Re-initializing environment...
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Trying to do a lazy unmount for cloudfs
fusermount: entry for /home/student/mnt/fuse not found in /etc/mtab
Unmounting successful!
*** Formatting SSD device  with ext4 ...
***
mke2fs 1.42.9 (4-Feb-2014)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10240 inodes, 10240 blocks
512 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=12582912
1 block group
32768 blocks per group, 32768 fragments per group
10240 inodes per group

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

Cleaned up everything to its default state.
Waiting for s3 server to initialize (sleep 5)...
Mounting successful!
Untaring /home/student/chk2/src/tests/checkpoint_2/test_2_2/big_test.tar.gz into /home/student/mnt/fuse/ ...
tar: big_test/c/big5: Cannot utime: Input/output error
tar: big_test/c/big5: Cannot close: Input/output error
tar: big_test/c/d/big8: Cannot utime: Input/output error
tar: big_test/c/d/big8: Cannot close: Input/output error
tar: big_test/c/d/big7: Cannot utime: Input/output error
tar: big_test/c/d/big7: Cannot close: Input/output error
tar: big_test/c/big6: Cannot utime: Input/output error
tar: big_test/c/big6: Cannot close: Input/output error
tar: big_test/largefile: Wrote only 2560 of 10240 bytes
tar: big_test/largefile: Cannot utime: Transport endpoint is not connected
tar: big_test/largefile: Cannot close: Transport endpoint is not connected
tar: big_test/a: Cannot mkdir: Transport endpoint is not connected
tar: big_test/a/big1: Cannot open: Transport endpoint is not connected
tar: big_test/a/big3: Cannot open: Transport endpoint is not connected
tar: big_test/a/big2: Cannot open: Transport endpoint is not connected
tar: big_test/b: Cannot mkdir: Transport endpoint is not connected
tar: big_test/b/big4: Cannot open: Transport endpoint is not connected
tar: big_test: Cannot utime: Transport endpoint is not connected
tar: Exiting with failure status due to previous errors
Unable to untar the /home/student/chk2/src/tests/checkpoint_2/test_2_2/big_test.tar.gz into /home/student/mnt/fuse/. Stopping the test.
make: *** [test_2_2] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:170:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:210:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:210:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:234:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:234:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:285:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:285:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:321:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:321:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:332:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc:340:38: error: ‘RUN_M’ was not declared in this scope
         RUN_M(lstat(path_t, &statbuf));
                                      ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:373:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:373:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:389:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:389:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:408:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:408:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:531:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:531:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:549:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:549:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:594:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:594:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:600:34: error: ‘RUN_M’ was not declared in this scope
     RUN_M(set_loc(path_s, ON_SSD));
                                  ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:614:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:614:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:619:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_de(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:632:32: error: ‘RUN_M’ was not declared in this scope
     RUN_M(get_loc(path_s, &loc));
                                ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:659:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:659:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:668:32: error: ‘RUN_M’ was not declared in this scope
     RUN_M(get_loc(path_s, &loc));
                                ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:685:32: error: ‘RUN_M’ was not declared in this scope
     RUN_M(get_loc(path_s, &loc));
                                ^
cloudfs/cloudfs.cc:707:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:717:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:796:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put(char*, char*, long int)’:
cloudfs/cloudfs.cc:55:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:878:14: note: in expansion of macro ‘FFOPEN__’
     infile = FFOPEN__(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:56:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:883:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put_old(char*, char*, stat*)’:
cloudfs/cloudfs.cc:55:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:919:14: note: in expansion of macro ‘FFOPEN__’
     infile = FFOPEN__(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:56:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:924:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:55:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:960:15: note: in expansion of macro ‘FFOPEN__’
     outfile = FFOPEN__(path_s, "wb");
               ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:963:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc:56:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:965:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(outfile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1039:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1039:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1059:32: error: ‘RUN_M’ was not declared in this scope
     RUN_M(get_loc(path_s, &loc));
                                ^
cloudfs/cloudfs.cc:1078:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:55:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:1086:28: note: in expansion of macro ‘FFOPEN__’
                 FILE *fd = FFOPEN__(path_s, "w");
                            ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:56:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:1087:17: note: in expansion of macro ‘FFCLOSE__’
                 FFCLOSE__(fd);
                 ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc:1116:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1165:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1165:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1180:32: error: ‘RUN_M’ was not declared in this scope
     RUN_M(get_loc(path_s, &loc));
                                ^
cloudfs/cloudfs.cc:1203:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1228:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1360:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1360:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1387:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1387:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1410:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1410:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1436:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1436:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1445:39: error: ‘RUN_M’ was not declared in this scope
         RUN_M(set_dirty(path_s, DIRTY));//only when on cloud
                                       ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1580:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1580:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1677:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1677:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1160:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1307:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
make: *** [build/obj/cloudfs.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ make test_2_2
build/obj/cloudfs.o: Compiling object
cloudfs/cloudfs.cc: In function ‘void* cloudfs_init(fuse_conn_info*)’:
cloudfs/cloudfs.cc:176:10: warning: unused variable ‘temp_dir’ [-Wunused-variable]
     char temp_dir[MAX_PATH_LEN] = TEMPDIR;
          ^
cloudfs/cloudfs.cc: In function ‘void get_path_s(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:216:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘void get_path_t(char*, const char*, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:240:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getattr(const char*, stat*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:291:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_open(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:327:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: too many arguments for format [-Wformat-extra-args]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:338:9: note: in expansion of macro ‘PF’
         PF("[%s]:\t downloading from cloud\n", __func__, pathname);
         ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_opendir(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:379:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mkdir(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:395:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_utimens(const char*, const timespec*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:414:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_getxattr(const char*, const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:537:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_setxattr(const char*, const char*, const char*, size_t, int)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:555:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_mknod(const char*, mode_t, dev_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:600:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_read_node(const char*, char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:620:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘uint64_t {aka long unsigned int}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:625:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t pread(fd: %d)\t file is %s\n", __func__, fi->fh, path_s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_node(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:665:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_write_de(const char*, const char*, size_t, off_t, fuse_file_info*)’:
cloudfs/cloudfs.cc:713:14: warning: unused variable ‘write_start’ [-Wunused-variable]
         long write_start = offset;
              ^
cloudfs/cloudfs.cc:722:13: warning: variable ‘start’ set but not used [-Wunused-but-set-variable]
         int start = 0;
             ^
cloudfs/cloudfs.cc:723:13: warning: unused variable ‘end’ [-Wunused-variable]
         int end = 0;
             ^
cloudfs/cloudfs.cc:802:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if (offset + size > fstate->threshold) {
                                     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put(char*, char*, long int)’:
cloudfs/cloudfs.cc:61:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:884:14: note: in expansion of macro ‘FFOPEN__’
     infile = FFOPEN__(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:62:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:889:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_put_old(char*, char*, stat*)’:
cloudfs/cloudfs.cc:61:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:925:14: note: in expansion of macro ‘FFOPEN__’
     infile = FFOPEN__(path_s, "rb");
              ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:62:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:930:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(infile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘void cloud_get(char*, char*)’:
cloudfs/cloudfs.cc:61:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:966:15: note: in expansion of macro ‘FFOPEN__’
     outfile = FFOPEN__(path_s, "wb");
               ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:33:44: warning: format ‘%d’ expects argument of type ‘int’, but argument 5 has type ‘FILE* {aka _IO_FILE*}’ [-Wformat=]
 #define PF(...) fprintf(logfile,__VA_ARGS__)
                                            ^
cloudfs/cloudfs.cc:969:5: note: in expansion of macro ‘PF’
     PF("[%s]:\t get %s(FD:%d) from cloud with key:[%s]\n", __func__, path_s, outfile, path_c);
     ^
cloudfs/cloudfs.cc:62:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:971:5: note: in expansion of macro ‘FFCLOSE__’
     FFCLOSE__(outfile);
     ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1045:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1084:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:61:49: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFOPEN__(x,y) ffopen_(__func__, (x), (y))
                                                 ^
cloudfs/cloudfs.cc:1092:28: note: in expansion of macro ‘FFOPEN__’
                 FILE *fd = FFOPEN__(path_s, "w");
                            ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:74:8: error:   initializing argument 1 of ‘FILE* ffopen_(char*, const char*, const char*)’ [-fpermissive]
 FILE * ffopen_(char* func, const char * filename, const char * mode );
        ^
cloudfs/cloudfs.cc:62:44: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
 #define FFCLOSE__(x) ffclose_(__func__, (x))
                                            ^
cloudfs/cloudfs.cc:1093:17: note: in expansion of macro ‘FFCLOSE__’
                 FFCLOSE__(fd);
                 ^
In file included from cloudfs/cloudfs.cc:25:0:
cloudfs/mydedup.h:76:5: error:   initializing argument 1 of ‘int ffclose_(char*, FILE*)’ [-fpermissive]
 int ffclose_(char* func, FILE * s);
     ^
cloudfs/cloudfs.cc:1122:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f <= fstate->threshold) {//smaller than threshold, need to move back to ssd
                                   ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1171:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:1209:34: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
             if (size_f > fstate->threshold) {//larger than threshold, need to move to cloud
                                  ^
cloudfs/cloudfs.cc:1234:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
         if(size_f <= fstate->threshold){
                              ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_chmod(const char*, mode_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1366:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_rmdir(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1393:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_unlink(const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1416:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_truncate(const char*, off_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1442:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_readlink(const char*, char*, size_t)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1586:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_start(cloudfs_state*, const char*)’:
cloudfs/cloudfs.cc:45:28: warning: invalid application of ‘sizeof’ to a void type [-Wpointer-arith]
 #define INFOF() sizeof(void)
                            ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc:45:23: warning: statement has no effect [-Wunused-value]
 #define INFOF() sizeof(void)
                       ^
cloudfs/cloudfs.cc:1683:5: note: in expansion of macro ‘INFOF’
     INFOF();
     ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_node(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1166:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
cloudfs/cloudfs.cc: In function ‘int cloudfs_release_de(const char*, fuse_file_info*)’:
cloudfs/cloudfs.cc:1313:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
make: *** [build/obj/cloudfs.o] Error 1
student@ip-172-31-91-144:~/chk2/src$ 

